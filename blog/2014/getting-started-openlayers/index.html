<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Gábor Farkas | Getting started with OpenLayers</title>
  <meta name="description" content="My personal site.">

  <link rel="shortcut icon" href="https://gaborfarkas.github.io/assets/img/favicon.ico">

  <link rel="stylesheet" href="https://gaborfarkas.github.io/assets/css/main.css">
  <link rel="canonical" href="https://gaborfarkas.github.io/blog/2014/getting-started-openlayers/">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    
    <span class="site-title">
        
        Gábor Farkas
    </span>
    

    <nav class="site-nav">

      <div class="trigger">
        <!-- About -->
        <a class="page-link" href="https://gaborfarkas.github.io/">about</a>

        <!-- Blog -->
        <a class="page-link" href="https://gaborfarkas.github.io/blog/">blog</a>

        <!-- Pages -->
        
          
        
          
            <a class="page-link" href="https://gaborfarkas.github.io/cv/">CV</a>
          
        
          
        
          
        
          
            <a class="page-link" href="https://gaborfarkas.github.io/publications/">publications</a>
          
        
          
            <a class="page-link" href="https://gaborfarkas.github.io/stuff/">stuff</a>
          
        
          
        
          
        
          
        

      </div>
    </nav>

  </div>

</header>



    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Getting started with OpenLayers</h1>
    <p class="post-meta">October 26, 2014</p>
  </header>

  <article class="post-content">
    <link href="/assets/css/ol-v3.0.0.css" rel="stylesheet" type="text/css" />

<style>
    .olControlAttribution {
        right : 0;
        bottom: 0;
        background: rgba(0, 60, 136, 0.3);
        padding: 2px 4px;
        border-radius: 5px 0 0 0;
        color: white;
    }
    .olControlAttribution a {
        color: white;
    }
    .olControlAttribution a:hover {
        color: #FF8000;
    }
    .olControlLayerSwitcher {
        right: 5px;
    }
    svg {
        max-height: initial;
    }
</style>

<p>In the world of open source web mapping interfaces, the biggest and most robust one is OpenLayers. OpenLayers was first released in 2006 by MetaCarta Labs. After 2007, it became an OSGeo project maintained by the OpenLayers Developer Team. It is still under development in these days. The two well-known and widely used branches of this project are OpenLayers 2 and OpenLayers 3. The third version was officially released this year (August, 2014.), and OpenLayers 3.1 has been announced. This also means, that OpenLayers 2 got out of development and the current version is its final form. OpenLayers 3 on the other hand is under constant development, so applications written with it may require frequent maintenance. In return we will get an interface armed with the capability of using up-to-date formats (e.g. TopoJSON), having beautifully rendered maps (WebGL) or in the future providing 3D maps (based on Cesium).</p>

<h3 id="basic-considerations">Basic considerations</h3>

<p>Before using a web mapping interface, the first consideration is the library you would like to use. OpenLayers is not so easy to use, and large, therefore uses a lot of resources. It is designed for being used with browsers. In future development, with WebGL and Cesium, it will depend on hardware acceleration, too. In return, it offers a library on which a professional GIS application can be based on. It handles different projections, most of the formats, and sources out there.</p>

<p>The next consideration is the OpenLayers version you want to use. There is a stable OpenLayers 2, where no changes will be applied, but it lacks the support of the new data-exchange formats. It’s also more complicated to define projections in it. There is also the new OpenLayers 3. It supports most of the formats, has way more classes and utilities to customize your maps, but it is under serious development.</p>

<p>One of the most conspicuous changes in OpenLayers 3 is the lack of support of the Google Maps maps. Let me explain this change. Google Maps has a policy which makes its tiles only reachable from its API. If one wants to use their maps, he/she has to include the Google Maps API in the used application or web page. OpenLayers Developers did this in OpenLayers 2. When you use a Google Maps map, you are requesting it through the Google Maps API, which is integrated in OpenLayers 2’s <code class="highlighter-rouge">OpenLayers.Layer.Google</code> class. The Development Team stated, until Google will change its policy for reaching its tiles, OpenLayers 3 won’t have an integrated <code class="highlighter-rouge">Google</code> class.</p>

<p>Let’s see the two libraries in action (OpenLayers 3 on the left):</p>

<div style="height: 500px; overflow: hidden; width: 700px;">
    <div id="openlayers2" style="height: 500px; position: absolute; width: 700px;"></div>
    <div id="openlayers3" style="height: 500px; position: absolute; width: 700px;"></div>
    <input id="slide" max="700" min="1" oninput="sliderChange(this.value)" style="opacity: 0.5; position: relative; top: 50%; width: 700px;" type="range" />
</div>

<h3 id="creating-the-map">Creating the map</h3>

<p>The core object in every web mapping interface is the <code class="highlighter-rouge">Map</code> class. The <code class="highlighter-rouge">Map</code> class contains every aspect of the web map and populates a <code class="highlighter-rouge">&lt;div&gt;</code> container. It is a HTML DOM element, which can be styled in many ways. This styling defines how the map will look like in a web page. It can be a simple container, like in the example above, or a popup as well. The Map object can be defined with the following codes:</p>

<p>OpenLayers 2:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Map</span><span class="p">({</span>
    <span class="na">div</span><span class="p">:</span> <span class="s1">'openlayers2'</span><span class="p">,</span>
    <span class="na">layers</span><span class="p">:</span> <span class="p">[</span>
        <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">Google</span><span class="p">(</span><span class="s1">'Google Streets'</span><span class="p">),</span>
        <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">OSM</span><span class="p">(),</span>
        <span class="nx">vector</span>
    <span class="p">],</span>
    <span class="na">center</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="na">zoom</span><span class="p">:</span> <span class="mi">2</span>
<span class="p">});</span>
</code></pre>
</div>

<p>OpenLayers 3:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">map2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">Map</span><span class="p">({</span>
    <span class="na">target</span><span class="p">:</span> <span class="s1">'openlayers3'</span><span class="p">,</span>
    <span class="na">layers</span><span class="p">:</span> <span class="p">[</span>
        <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">Tile</span><span class="p">({</span>
            <span class="na">style</span><span class="p">:</span> <span class="s1">'Road'</span><span class="p">,</span>
            <span class="na">source</span><span class="p">:</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">MapQuest</span><span class="p">({</span><span class="na">layer</span><span class="p">:</span> <span class="s1">'osm'</span><span class="p">})</span>
        <span class="p">}),</span>
        <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">Vector</span><span class="p">({</span>
            <span class="na">source</span><span class="p">:</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">GeoJSON</span><span class="p">({</span>
                <span class="na">object</span><span class="p">:</span> <span class="nx">hun</span>
            <span class="p">})</span>
        <span class="p">})</span>
    <span class="p">],</span>
    <span class="na">view</span><span class="p">:</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">View</span><span class="p">({</span>
        <span class="na">center</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
        <span class="na">zoom</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="na">minZoom</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">})</span>
<span class="p">});</span>
</code></pre>
</div>

<p>This method is called object construction. The <code class="highlighter-rouge">OpenLayers</code> and <code class="highlighter-rouge">ol</code> objects are constructors. They require parameters to do their task. The map constructors take a great number of parameters, however almost all of them have a default value. You only have to provide the ones, you want to use specifically. For this example, I only used the most essentials. The common parameters are <code class="highlighter-rouge">div</code>/<code class="highlighter-rouge">target</code> and <code class="highlighter-rouge">layers</code>. The first one must be the <code class="highlighter-rouge">id</code> of the corresponding <code class="highlighter-rouge">&lt;div&gt;</code> container, and the second one, of course defines the layers got to be shown. Only the last parameter differs in the codes. The view needs to be defined in both of the instances. However, the method differs.</p>

<h3 id="creating-the-view">Creating the view</h3>

<p>In OpenLayers 2 the map view is defined by parameters which belong to the map object. You can include them in the constructor or set them up with functions, when the map object has been constructed. In OpenLayers 3, there is an ol.View constructor, which defines the view. This is more practical in several ways. In OL 2, the map object is lengthy, the masses of parameters make it harder to implement. OL 3 minimized the number of parameters with adding more constructors to distinct aspects. With a new ol.View object, the construction is more clear, and it is easier to synchronize.</p>

<p>OpenLayers 2:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Map</span><span class="p">({</span>
    <span class="p">[...]</span>
    <span class="na">center</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="na">zoom</span><span class="p">:</span> <span class="mi">2</span>
<span class="p">});</span>

<span class="nx">map</span><span class="p">.</span><span class="nx">setCenter</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">2</span><span class="p">);</span>

<span class="nx">map</span><span class="p">.</span><span class="nx">zoomToMaxExtent</span><span class="p">();</span>
<span class="nx">Note</span> <span class="nx">that</span> <span class="nx">the</span> <span class="nx">three</span> <span class="nx">methods</span> <span class="nx">are</span> <span class="nx">alternatives</span> <span class="nx">to</span> <span class="nx">each</span> <span class="nx">others</span><span class="p">.</span>
</code></pre>
</div>

<p>OpenLayers 3:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">view</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">View</span><span class="p">({</span>
    <span class="na">center</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="na">zoom</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="na">minZoom</span><span class="p">:</span> <span class="mi">2</span>
<span class="p">});</span>
</code></pre>
</div>

<h3 id="adding-controls">Adding controls</h3>

<p>The <code class="highlighter-rouge">controls</code> parameter can be defined in both of the frameworks. There are default controls, like pan and zoom, only the extra ones need to be defined. In OpenLayers 3 there isn’t a layer switcher yet, but I wanted to show it, so I defined one in the OpenLayers 2 instance. Defining controls, also has two ways. You can provide them as a parameter in the map constructor in an array, or you can add them after. I recommend the second method, if you aren’t sure what are you doing, as in the first method you have to provide the default controls also, otherwise they will be lost. For now, I will only show the code of the only control in the example, but there will be an article later based on control management.</p>

<p>OpenLayers 2:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Map</span><span class="p">({</span>
    <span class="p">[...]</span>
    <span class="na">controls</span><span class="p">:</span> <span class="p">[</span>
        <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">LayerSwitcher</span><span class="p">()</span>
    <span class="p">]</span>
<span class="p">});</span>

<span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">LayerSwitcher</span><span class="p">());</span>
</code></pre>
</div>

<h3 id="the-full-code">The full code</h3>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Map</span><span class="p">({</span>
    <span class="na">div</span><span class="p">:</span> <span class="s1">'openlayers2'</span><span class="p">,</span>
    <span class="na">layers</span><span class="p">:</span> <span class="p">[</span>
        <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">Google</span><span class="p">(</span><span class="s1">'Google Streets'</span><span class="p">),</span>
        <span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">OSM</span><span class="p">()</span>
    <span class="p">]</span>
<span class="p">});</span>

<span class="nx">map</span><span class="p">.</span><span class="nx">addControl</span><span class="p">(</span><span class="k">new</span> <span class="nx">OpenLayers</span><span class="p">.</span><span class="nx">Control</span><span class="p">.</span><span class="nx">LayerSwitcher</span><span class="p">());</span>
<span class="nx">map</span><span class="p">.</span><span class="nx">setCenter</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">2</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">view</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">View</span><span class="p">({</span>
    <span class="na">center</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="na">zoom</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="na">minZoom</span><span class="p">:</span> <span class="mi">2</span>
<span class="p">});</span>

<span class="nx">map2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">Map</span><span class="p">({</span>
    <span class="na">target</span><span class="p">:</span> <span class="s1">'openlayers3'</span><span class="p">,</span>
    <span class="na">layers</span><span class="p">:</span> <span class="p">[</span>
        <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">layer</span><span class="p">.</span><span class="nx">Tile</span><span class="p">({</span>
            <span class="na">style</span><span class="p">:</span> <span class="s1">'Road'</span><span class="p">,</span>
            <span class="na">source</span><span class="p">:</span> <span class="k">new</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">MapQuest</span><span class="p">({</span><span class="na">layer</span><span class="p">:</span> <span class="s1">'osm'</span><span class="p">})</span>
        <span class="p">})</span>
    <span class="p">],</span>
    <span class="na">view</span><span class="p">:</span> <span class="nx">view</span>
<span class="p">});</span>
</code></pre>
</div>

<script src="/assets/js/OpenLayers/OpenLayers.js" type="text/javascript"></script>

<script src="/assets/js/ol-v3.0.0.js" type="text/javascript"></script>

<script src="https://maps.google.com/maps/api/js?v=3&amp;sensor=false&amp;callback=check&amp;key=AIzaSyBXuctRWm0Po1lKBCQZnkAQz9wDU2UNGes" type="text/javascript"></script>

<script src="/assets/js/getting-started-openlayers.js" type="text/javascript"></script>


  </article>

  
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_shortname  = 'gaborfarkas-github-io';
      var disqus_identifier = '/blog/2014/getting-started-openlayers';
      var disqus_title      = "Getting started with OpenLayers";
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  

</div>

      </div>
    </div>

    <footer>

  <div class="wrapper">
    &copy; Copyright 2017 Gábor Farkas.
    Powered by <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank">GitHub Pages</a>.

    
  </div>

</footer>


    <!-- Load jQuery -->
<script src="//code.jquery.com/jquery-1.12.4.min.js"></script>

<!-- Load Common JS -->
<script src="https://gaborfarkas.github.io/assets/js/common.js"></script>


<!-- Load KaTeX -->
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js"></script>
<script src="https://gaborfarkas.github.io/assets/js/katex.js"></script>




<!-- Include custom icon fonts -->
<link rel="stylesheet" href="https://gaborfarkas.github.io/assets/css/font-awesome.min.css">
<link rel="stylesheet" href="https://gaborfarkas.github.io/assets/css/academicons.min.css">

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-107151753-1', 'auto');
  ga('send', 'pageview');

</script>


  </body>

</html>

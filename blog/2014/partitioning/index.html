<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Gábor Farkas | A map server partitioning scheme</title>
  <meta name="description" content="My personal site.">

  <link rel="shortcut icon" href="https://gaborfarkas.github.io/assets/img/favicon.ico">

  <link rel="stylesheet" href="https://gaborfarkas.github.io/assets/css/main.css">
  <link rel="canonical" href="https://gaborfarkas.github.io/blog/2014/partitioning/">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    
    <span class="site-title">
        
        Gábor Farkas
    </span>
    

    <nav class="site-nav">

      <div class="trigger">
        <!-- About -->
        <a class="page-link" href="https://gaborfarkas.github.io/">about</a>

        <!-- Blog -->
        <a class="page-link" href="https://gaborfarkas.github.io/blog/">blog</a>

        <!-- Pages -->
        
          
        
          
            <a class="page-link" href="https://gaborfarkas.github.io/cv/">CV</a>
          
        
          
        
          
        
          
            <a class="page-link" href="https://gaborfarkas.github.io/publications/">publications</a>
          
        
          
            <a class="page-link" href="https://gaborfarkas.github.io/stuff/">stuff</a>
          
        
          
        
          
        
          
        

      </div>
    </nav>

  </div>

</header>



    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">A map server partitioning scheme</h1>
    <p class="post-meta">February 27, 2014</p>
  </header>

  <article class="post-content">
    <p>When you have a server machine and plan to run a dedicated Linux server, you should make some partitioning considerations first. For a mapserver you won’t have to make a very detailed partitioning scheme, but you may consider to build some partitions for the basic functions of your Linux server. If you have to deal with RAID disks or GPT partitioning then I assume you already know how to structure your server. The following thoughts will be about a normal sized mapserver.</p>

<h3 id="the-swap">The swap</h3>

<p>The swap partition is designed to be the swapping space of your Linux system. With optimal swap space your machine won’t slow down drastically, even if it runs out of physical memory. The optimal swap size is the double of the system memory. However, if you plan to extend your machine with additional memory, the swap partition should be double the size of the planned memory, so you won’t have to repartition your server after the extension causing remarkable offline time. The ideal place of the swap partition is between the data and the <strong>/home</strong> partitions.</p>

<h3 id="the-root">The root</h3>

<p>The <strong>/</strong> directory is the root of your system. Everything that won’t get space on another partition goes on the root partition. An average map server won’t have hundreds of gigabytes of programs installed, so the <strong>/usr</strong> directory contrary to some special servers won’t have to be on a separate partition and a default 20 GB in size will be more than enough. If you plan otherwise, than you should consider making a partition for <strong>/usr</strong> or making a bigger root partition.</p>

<h3 id="the-home">The home</h3>

<p>The <strong>/home</strong> contains the default settings and personal files of the users of a Linux system. This partition may take up to a lot of space depending on how many users will your server have. You have to guess the exact size based on the planned audience of your server.</p>

<h3 id="the-variables">The variables</h3>

<p>The default directory for the system variables on a Linux is the <strong>/var</strong>. It can contain a bunch of things from the e-mails and the web server contents to the system logs. You don’t have to separate the <strong>/var</strong> directory on a partition, but you have to deal with at least one sub-directory.</p>

<p>The <strong>/var/log</strong> is the place where your system stores the security and error logs. There are two aspects in placing this folder on a different partition than your root. The first is, that if someone other than an admin can access the system logs, it is a security issue. The second, that if your system gets in some sort of loophole, this log can grow at a rate of hundreds of megabytes per second and it can populate your root directory very quickly. There are some other important directories in the <strong>/var</strong>, but on a basic map server you won’t have to deal with them. However you should take in consideration, that the <strong>/var/www</strong> holds the content of a default Apache web server and the <strong>/var/mail</strong> holds the mailboxes of the users by default.</p>

<h3 id="other-directories">Other directories</h3>

<p>There might be some other directories you should consider depending on the use of the server. If you want to keep a nice little separate place for administrative use, you should keep the <strong>/tmp</strong> directory on a different partition.</p>

<p>For security reasons, especially if you have to fear from hackers, you may consider putting <strong>/root</strong> (the superuser’s home directory) and <strong>/boot</strong> (which is responsible for the successful booting sequence) on different partitions. The <strong>/boot</strong> partition can be about 20-50 megabytes big (depending on the distribution) and you should unmount it after booting to fulfil the partition’s purpose.</p>

<p>If you have really big and/or dynamically growing databases behind your map server, you might just consider keeping them on a separate partition with or without the web server content depending on your server. Every database management system (DBMS) has a default path for its content. This path can be modified with a variable or a symlink. Also, the default <strong>/var/www</strong> path of the Apache web server can be changed. They can easily point to a partition that isn’t defined in the Linux filesystem hierarchy standard, like <strong>/data</strong>.</p>

<h3 id="my-map-server-partitioning-scheme">My map server partitioning scheme</h3>

<p>My scheme is based on a basic map server serving tiles and features, without extraordinary databases and with relatively low traffic. I wouldn’t mess around with extra security settings, I just want to keep the number of partitions as low a possible. Unfortunately I can’t show you my scheme the stylish way with df, because my computer is mostly used as a workstation besides its partly server styled partitioning.</p>

<table>
  <thead>
    <tr>
      <th>Mount point</th>
      <th>Approx. size</th>
      <th>Comment</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>/</strong></td>
      <td>20GB</td>
      <td>Root folder with the most system directories.</td>
    </tr>
    <tr>
      <td><strong>/var/log</strong></td>
      <td>50GB</td>
      <td>System logs. With monthly rotations, 50GB should be more than enough.</td>
    </tr>
    <tr>
      <td><strong>/home</strong></td>
      <td>100-200GB</td>
      <td>Home directories of the users. Maybe oversized if it only contains user preferences.</td>
    </tr>
    <tr>
      <td>swap</td>
      <td>2x RAM</td>
      <td>Between the data and the rest of the server for less needle movement and faster processing.</td>
    </tr>
    <tr>
      <td><strong>/data</strong></td>
      <td>rest of the disk</td>
      <td>For every data the server has to create and serve.</td>
    </tr>
  </tbody>
</table>


  </article>

  
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_shortname  = 'gaborfarkas-github-io';
      var disqus_identifier = '/blog/2014/partitioning';
      var disqus_title      = "A map server partitioning scheme";
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  

</div>

      </div>
    </div>

    <footer>

  <div class="wrapper">
    &copy; Copyright 2019 Gábor Farkas.
    Powered by <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank">GitHub Pages</a>.

    
  </div>

</footer>


    <!-- Load jQuery -->
<script src="//code.jquery.com/jquery-1.12.4.min.js"></script>

<!-- Load Common JS -->
<script src="https://gaborfarkas.github.io/assets/js/common.js"></script>


<!-- Load KaTeX -->
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js"></script>
<script src="https://gaborfarkas.github.io/assets/js/katex.js"></script>




<!-- Include custom icon fonts -->
<link rel="stylesheet" href="https://gaborfarkas.github.io/assets/css/font-awesome.min.css">
<link rel="stylesheet" href="https://gaborfarkas.github.io/assets/css/academicons.min.css">

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-107151753-1', 'auto');
  ga('send', 'pageview');

</script>


  </body>

</html>

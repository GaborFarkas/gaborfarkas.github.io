document.getElementById("slide").max = parseInt(document.getElementById("openlayers2").style.width);
var map, map2, startCoords, endCoords, centerCoords, movevar, view;
var slidevar = document.getElementById('openlayers3');
function init(){
var hun={"type":"FeatureCollection","features":[{"type":"Feature","properties":{"name_long":"Hungary","pop_est":9905596},"geometry":{"type":"Polygon","coordinates":[[[2463704.7068827716,6174552.874772666],[2474314.845849008,6175912.156829483],[2474760.558653942,6175699.242919881],[2477271.7698232047,6174896.769036926],[2479022.0079108737,6167105.234677582],[2479326.39714351,6166622.590029597],[2481881.0924888616,6161478.802853705],[2484283.5932178977,6154671.525644638],[2488012.3613177096,6149559.41984734],[2496209.1285108863,6147428.917502873],[2506927.9779173494,6141089.528021562],[2513863.704003886,6129182.221193452],[2524321.648353798,6124239.970714542],[2525071.7503913688,6124109.73578416],[2527126.377711677,6124679.5282192575],[2534649.140175439,6125110.967698441],[2536105.860074492,6122709.835276766],[2542117.5474190894,6116892.930967131],[2544454.82188399,6111770.815138108],[2543259.0070414823,6106367.45311266],[2544324.369355713,6100253.163448885],[2546618.1596445222,6098086.193517865],[2543846.043418714,6093981.000437185],[2524365.1325298892,6073484.386092328],[2516755.4017139417,6068064.594795981],[2511689.4951993274,6066948.703007112],[2503731.8909746516,6069099.75409542],[2495502.510649407,6067458.113936005],[2488153.68489001,6063084.629496104],[2481381.0244638156,6061694.633519069],[2476260.762729083,6056492.219634951],[2469629.4258751892,6045362.810120744],[2461487.0139021245,6035947.515299227],[2453257.633576883,6030108.417961144],[2448996.184319951,6024900.854868273],[2448506.9873389257,6006903.7761633545],[2443941.148849358,6001734.222067575],[2437809.88002051,5996527.648266481],[2434483.340549538,5991933.377373062],[2425145.113733971,5964650.400707286],[2418057.1930311164,5955928.954624593],[2411338.8878250397,5949242.041592024],[2410230.0413347147,5943142.1168650845],[2410360.493862989,5936162.341542011],[2402739.8920030203,5922243.369129019],[2392749.4025460863,5907822.555665688],[2390814.356710029,5901910.142829102],[2393042.9207346993,5893940.657089371],[2383465.530950632,5884782.719511337],[2377932.1695430335,5880389.354259318],[2373355.4600094445,5878292.396950838],[2370496.375431451,5872565.903775786],[2365789.213369588,5858637.010707969],[2367017.6413441636,5852394.739248],[2367158.964916461,5846669.317426487],[2359060.0371194878,5843319.385453106],[2356679.278478496,5837048.585034915],[2354624.651158191,5829255.693107091],[2351254.62751113,5825723.609305445],[2342144.692620041,5819253.101259198],[2319565.5341847246,5822067.150155408],[2311020.893582817,5819897.5807635505],[2308477.0692814896,5815269.375635501],[2307955.2591683962,5811562.274647417],[2305139.6587664965,5808084.354514827],[2299975.912855676,5803721.225188295],[2294703.4565046285,5801767.931433423],[2282951.85792,5807142.4897272885],[2257665.809519014,5801689.494908827],[2253306.5208658758,5797768.554958479],[2249784.302602497,5800567.928673311],[2244359.6516351285,5803117.1485210275],[2219051.8611500952,5806263.506437565],[2209072.2427371824,5803760.45237238],[2195722.6006772113,5804725.495887062],[2183362.2236233065,5807503.526036822],[2174154.449336011,5805251.2143021785],[2166001.1663189256,5794358.749664093],[2161968.008986477,5790683.901439178],[2158804.535175847,5788334.05162035],[2151836.1959572425,5784920.047285075],[2146031.0584490784,5780810.892009785],[2138269.133016815,5777853.479041689],[2131355.149018326,5778268.083320129],[2124789.0384285673,5782939.587994472],[2122440.8929196433,5781875.176110017],[2120375.3945553177,5777571.872094506],[2116820.5631598653,5773896.156994644],[2107036.6235393644,5769362.2661186205],[2104536.283414125,5769416.971686013],[2103970.9891249407,5769416.971686013],[2096480.8397932432,5766072.7366385935],[2084098.7206512967,5764237.068307514],[2077891.3545142896,5765533.713821375],[2066607.2108186418,5750477.731394725],[2063150.2188194015,5747740.891004531],[2052431.3694129384,5743142.39992738],[2043636.6947985094,5740859.625049338],[2036103.0612907205,5742682.681466126],[2033135.2662725027,5742846.307349724],[1999728.5479904965,5743609.934577081],[1982280.5223339328,5746828.79793536],[1971072.475946447,5752708.3722760575],[1963636.6818348647,5759278.754748975],[1960005.753131256,5766541.478729076],[1951341.531045101,5770948.864472734],[1937665.7576644407,5772512.292977928],[1927012.134522116,5779731.087243392],[1919391.5326621474,5792634.750361891],[1909085.7829285534,5802866.11580654],[1896073.143233281,5810415.901473683],[1885745.65141164,5821092.35012496],[1878125.0495516744,5834891.075035127],[1864384.0499068757,5847331.572474556],[1844555.265609326,5858415.96970599],[1838576.1913967966,5860824.037165064],[1837402.118642336,5864409.726727589],[1827694.2763299914,5878197.452249869],[1823552.408557316,5883294.270091267],[1823922.0240540882,5890128.968998733],[1821986.9782180334,5894019.919757007],[1818453.8889106282,5896754.920949157],[1816562.3272506648,5906647.691301105],[1815453.4807603427,5914040.849697089],[1812681.3645345345,5918808.81971997],[1791471.9576460884,5919786.574834467],[1809224.3725352886,5937492.530052375],[1818051.6602817883,5942432.729481578],[1828303.0547952675,5941579.946876656],[1831586.110090151,5943181.97180101],[1832455.7936119721,5945741.040034651],[1834206.031699641,5951523.633134458],[1835075.715221462,5956982.731262053],[1835956.2697873039,5962117.725344388],[1834858.2943410082,5965017.979517817],[1829911.9693106415,5965921.010789008],[1827520.339625629,5978621.324704221],[1830064.1639269597,5983424.766593593],[1832607.9882282903,5986772.735094232],[1829466.2565057073,6002255.853969835],[1830412.0373356875,6007530.111687252],[1838413.1257364547,6008357.265149346],[1845055.3336343751,6011666.668956726],[1850469.1135577173,6015435.466833733],[1851980.188676885,6020219.139673472],[1856426.4456822027,6030011.804007324],[1852328.062085613,6042032.427427824],[1829216.2224931829,6049864.497081167],[1828009.5366066545,6052866.9268493885],[1833390.7033979318,6056274.174552729],[1839119.743597934,6061137.081846382],[1842446.283068906,6064927.527921888],[1846892.5400742237,6065452.987835138],[1853186.8745634134,6063545.317157048],[1864329.6946867637,6054820.681533812],[1868602.014987716,6053561.185680875],[1872733.0117163735,6056096.512265417],[1877146.6555896234,6056637.586085939],[1889474.4195114577,6056314.552855736],[1899845.3955091874,6058341.786677085],[1897508.1210442898,6067644.096860599],[1897540.7341763575,6074398.806566242],[1895779.625044668,6079798.294845972],[1896877.6004909696,6085744.079018038],[1901084.6945277834,6090380.429970029],[1902345.7356344266,6100805.138289166],[1908835.748916029,6107845.929851153],[1911868.770198385,6108861.514734638],[1923294.2374663276,6107577.835493913],[1926001.127428,6105750.142594746],[1927751.3655156689,6105344.041464512],[1945938.6221657766,6088175.419846637],[1963147.484853839,6075289.043691895],[1977247.2289513864,6068703.467480312],[1997956.5678147834,6068161.635696053],[2019959.5609168916,6067587.492936763],[2056768.9159780263,6069835.763327314],[2084370.4967518656,6071518.306365965],[2086196.8321476963,6074722.5185059635],[2090360.4420084187,6082414.257598718],[2087055.6446254938,6089018.4451736035],[2087251.3234179034,6096787.896667716],[2091904.1302596543,6106903.574584557],[2105514.677376173,6115315.318512321],[2144585.209594046,6119015.847013307],[2167055.6575891357,6125290.062164984],[2170447.423324246,6133866.556526102],[2177883.2174358256,6142337.453331567],[2184688.490994088,6144050.588477189],[2194015.8467656313,6140159.819653669],[2205245.635241164,6132685.047692742],[2215105.672169827,6128734.2885776935],[2220867.3255018997,6131283.7451444315],[2240706.9808434756,6143871.101085005],[2263547.044335337,6156166.537005145],[2279266.573992279,6189623.541131016],[2280940.714771786,6194964.903569188],[2297986.5117995064,6198798.637618818],[2322859.460523629,6198117.141125134],[2335611.1951623503,6193750.290274089],[2345199.4559904444,6191436.43907129],[2359570.976188557,6192224.062505459],[2380280.3150519542,6199430.918112451],[2387955.272132038,6199225.627087212],[2393890.8621684765,6194119.580035631],[2400402.617538123,6189721.969120195],[2404794.5193233257,6184342.906729152],[2408121.0587942973,6176763.865633409],[2409914.781058055,6173906.063606395],[2412806.4787681163,6170034.409710429],[2418024.579899049,6164708.641005469],[2423090.486413666,6163285.726282349],[2461421.787637989,6172547.10120963],[2463704.7068827716,6174552.874772666]]]}}]};
var vector=new OpenLayers.Layer.Vector({strategies:[new OpenLayers.Strategy.Fixed()]});
map=new OpenLayers.Map('openlayers2',{layers:[new OpenLayers.Layer.Google('Google Streets'),new OpenLayers.Layer.OSM(),vector]});
map.addControl(new OpenLayers.Control.LayerSwitcher());
map.zoomToMaxExtent();
vector.addFeatures(new OpenLayers.Format.GeoJSON().read(hun));
vector.setName('Hungary');
view=new ol.View({center:[0,0],zoom:2,minZoom:2});
map2=new ol.Map({target:'openlayers3',layers:[new ol.layer.Tile({source: new ol.source.OSM()}),new ol.layer.Vector({source:new ol.source.GeoJSON({object:hun})})],view:view});}
function sliderChange(e){
slidevar.style.width=e + 'px';map2.updateSize();
startCoords=ol.proj.transform(map2.getCoordinateFromPixel([0,0]),view.getProjection().a,"EPSG:4326")[0];
endCoords=ol.proj.transform(map2.getCoordinateFromPixel([map.getSize().w,0]),view.getProjection().a,"EPSG:4326")[0];
if(startCoords>endCoords){endCoords=endCoords+360}
centerCoords=startCoords+(endCoords-startCoords)/2;
if(centerCoords>360){centerCoords=centerCoords-360}centerCoords=ol.proj.transform([centerCoords],"EPSG:4326",view.getProjection().a);
map.setCenter([centerCoords,map.getCenter().lat])
}
function changeView(evt){
if(movevar===false){startCoords=ol.proj.transform(map2.getCoordinateFromPixel([0,0]),view.getProjection().a,"EPSG:4326")[0];
endCoords=ol.proj.transform(map2.getCoordinateFromPixel([map.getSize().w,0]),view.getProjection().a,"EPSG:4326")[0];
if(startCoords>endCoords){endCoords=endCoords+360}
centerCoords=startCoords+(endCoords-startCoords)/2;
if(centerCoords>360){centerCoords=centerCoords-360}
centerCoords=ol.proj.transform([centerCoords],"EPSG:4326",view.getProjection().a);
map.setCenter([centerCoords,evt.map.getView().getCenter()[1]],evt.map.getView().getZoom());movevar=true}else{movevar=false}}function changeView2(evt){if(movevar===false){view.setZoom(evt.object.zoom);startCoords=map.getLonLatFromPixel(new OpenLayers.Pixel([0,0])).transform(map.getProjection(),"EPSG:4326").lon;endCoords=map.getLonLatFromPixel(new OpenLayers.Pixel([map2.getSize(),0])).transform(map.getProjection(),"EPSG:4326").lon;if(startCoords>endCoords){endCoords=endCoords+360}centerCoords=startCoords+(endCoords-startCoords)/2;if(centerCoords>360){centerCoords=centerCoords-360}centerCoords=new OpenLayers.LonLat([centerCoords]).transform("EPSG:4326",map.getProjection()).lon; view.setCenter([centerCoords,evt.object.center.lat]);map2.updateSize();movevar=true}else{movevar=false}}
function register(){movevar=false;map2.on('moveend',changeView);map.events.on({'moveend':changeView2});}
function checkmap(){if(typeof map === 'undefined' || typeof map2 === 'undefined'){setTimeout(checkmap, 500);}else{ register();sliderChange(350);}}checkmap();init();
